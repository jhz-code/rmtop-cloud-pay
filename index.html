<!DOCTYPE html><html lang="en" data-theme="light"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>支付sdk</title>
    
    
        <script src="asset/theme.js"></script>
    
<link rel="stylesheet" type="text/css" href="asset/plugins/theme-default/520.index.css"><style data-rh="true">
:root {
    --ttw-primary-color: #21ba45;
}
</style></head>
<body>
<div id="root"><div><div class="Loading__loading___1m_fZ"><div class="Loading__bar___21yOt" style="background: rgb(33, 186, 69); width: 100%; display: block;"><div class="Loading__peg___3Y_28"></div></div></div><div class="Loading__spinner___11Pm4"><div class="Loading__icon___3OOyu" style="display: none; border-color: #21ba45;"></div></div></div></div>
<script type="application/payload+json">
{"book":{"id":"43"},"summary":[{"title":"","articles":[{"title":"操作手册","ref":"操作手册.md","path":"cao-zuo-shou-ce.html","children":[]}]}],"config":{"title":"支付sdk"},"file":{"path":"index.html","content":"# rmtop-cloud-pay\n\n支付管理\n\n云端支付sdk \n\n### 安装 \n\n` composer require rmtop\/rmsf-cloud-pay\n `\n\n### 发布支付文件 \n\n` php think rmtop:publish_pay\n `\n\n### 数据迁移 创建支付相关配置文件\n\n` php think migrate:run\n `\n\n### 支付配置操作\n\n` function addConfig(array $data) \/\/创建配置\n `\n\n`editConfig(int $id, array $data)`\n\n`deleteConfig(int $id)`\n\n` \ngetConfig(int $id) \/\/获取配置 `\n\n#### 微信支付配置\n\n` $data['merchantId'] = '15196xxxx';\n$data['merchantSerialNumber'] = '6A6E499099E0F19FE334Cxxxxxxxx';\n$data['apiV3key'] = 'xN5nxxxxxxxxx;\nTopPayConfig::addConfig($data);\n `\n\n## 微信V3版相关支付\n\n##### jsApi支付 \n\n` $result =    TopWxPay::JsApi([\n'configId'=>'1',\n'appid'=>'wxc1ee20xxxxx',\n'mchid'=>'1519xxxxx',\n'description'=>'支持测试',\n'out_trade_no'=>time(),\n'amount'=>array('total'=>100,'currency'=>'CNY'),\n'notify_url'=>'http:\/\/127.0.0.1:8000\/admin\/',\n'payer'=>array('openid'=>'oUpF8uMuAJO_M2pxb1Q9zNjWeS6o'),\n]);\n `\n\n##### h5支付 \n\n`$result =    TopWxPay::H5Api([\n'configId'=>'1',\n'appid'=>'wxxxxxxxxxx7',\n'mchid'=>'15196xxxxxx',\n'description'=>'支持测试',\n'out_trade_no'=>time(),\n'amount'=>array('total'=>100,'currency'=>'CNY'),\n'notify_url'=>'http:\/\/127.0.0.1:8000\/',\n'scene_info'=>array('payer_client_ip'=>'http:\/\/127.0.0.1:8000\/admin\/','h5_info'=>array('type'=>'wap')),\n]);`\n\n##### app支付 \n\n`$result =    TopWxPay::AppApi([\n'configId'=>'1',\n'appid'=>'wxc1eexxxxxxxx',\n'mchid'=>'1519xxxxx',\n'description'=>'支持测试',\n'out_trade_no'=>time(),\n'amount'=>array('total'=>100,'currency'=>'CNY'),\n'notify_url'=>'http:\/\/127.0.0.1:8000\/',\n]);`\n\n##### Native 支付 二维码支付 \n\n` $result =    TopWxPay::NativeApi([\n'configId'=>'1',\n'appid'=>'wxc1ee20xxxx',\n'mchid'=>'1519xxx',\n'description'=>'支持测试',\n'out_trade_no'=>time(),\n'amount'=>array('total'=>100,'currency'=>'CNY'),\n'notify_url'=>'http:\/\/127.0.0.1:8000\/',\n]);\n `\n\n#### 查询订单\n\n` queryByTransactions(string $transaction_id,string $mchid)\n `\n\n`queryByOrderId(string $orderId,string $mchid)`\n\n\\####关闭订单\n\n`closeOrder(string $orderId,string $mchid)`\n\n#### 订单退款\n\n`queryRefundsOrder($out_refund_no)`\n\n\\####申请交易账单API\n`queryTradeBill(string $bill_date,string $bill_type = 'ALL',string $tar_type = '')`\n\n#### 申请资金账单API\n\n`function fundFloBill(string $bill_date,string $account_type ='BASIC',string $tar_type='')`\n\n#### 支付回调处理\n\n如果能得到返回数据，则接受数据并验证成功，只需根据参数处理订单即可：\n\n` $result =  (new PayClient())->Notify(intput());\nif($result['out_trade_no']){\n  \/\/处理订单\n}\nexit(json(['code'=>'SUCCESS','message'=>'']));\/\/通知微信支付网关\n `\n\n#### 退款回调处理\n\n` $result =  (new PayClient())->Notify(intput());\n `\n$result 为退款回调通知数据\n\n## 支付宝相关支付\n\n开发中。。\n","meta":{"mtime":"2021-06-17T15:34:00+08:00"}},"options":{}}
</script>

<script src="https://jsdelivr.topthink.com/npm/lodash@4.17/lodash.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react@17/umd/react.production.min.js"></script>

<script src="https://jsdelivr.topthink.com/npm/react-dom@17/umd/react-dom.production.min.js"></script>

<script src="asset/index.js"></script>

<script src="asset/plugins/theme-default/index.js"></script>

<script type="text/javascript">
    TopWrite.bootstrap();
</script>


</body></html>